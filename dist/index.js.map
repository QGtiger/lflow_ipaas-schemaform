{"version":3,"sources":["../src/common/createModel.tsx","../src/hooks/useDefaultValue.ts","../src/components/Upload/index.tsx","../src/hooks/useEditor.ts","../src/components/CustomSelect/index.tsx","../src/utils/excuteScript.ts","../src/RecursionFormItem/utils.ts","../src/RecursionFormItem/index.tsx","../src/RecursionFormItem/createFormItem.ts","../src/utils/findCursorItem.ts","../src/RecursionFormItem/CreateSchemaFormItem.tsx","../src/utils/index.ts","../src/components/DynamicForm/index.tsx","../src/components/MultiSelect/index.tsx","../src/components/CodeEditor/index.tsx","../src/store.tsx","../src/index.tsx"],"names":["createCustomModel","useHook","Context","createContext","Provider","children","value","state","jsx","useModel","context","useContext","isHasValue","useDefaultValue","props","useEffect","_defaultValue","Upload","useEditor","type","defaultComponent","editorMap","IPaasSchemaFormStore","CustomSelect","_a","depItems","name","isDynamic","dynamicScript","schemaInfo","defaultValue","options","rest","__objRest","form","FormContext","dynamicScriptExcuteWithOptions","selectOptions","setSelectOptions","useState","loading","loadingAction","useBoolean","SelectComp","Select","run","cancel","useDebounceFn","extParams","list","item","Form","prevValues","currentValues","isUpdate","depItem","__spreadProps","__spreadValues","k","excuteScriptByValidateRules","script","replaceHtmlATagsWithMarkdown","str","regex","match","href","title","titleText","linkText","customLinkRenderer","DefaultConfig","CommonLayout","node1","node2","jsxs","Fragment","WrapperFieldComponent","formItemState","otherProps","payload","FieldComponent","_config","editorLayoutWithDesc","ReactMarkdown","RecursionFormItem","next","nextFieldItem","useMemo","current","acients","_","r","j","errorMessages","suc","errorMsg","createFormItem","itemConfig","parent","acient","nextItem","isVisibleFunc","expression","formValue","findCusrorItem","schema","index","GroupItem","subSchema","groupName","open","openAction","cursorFormItem","classNames","DownOutlined","CreateSchemaFormItem","groupMap","action","group","v","getValueFromObjectByPath","obj","path","result","i","key","getValueFormObjectByExpression","DaynamicForm","staticSubFields","dynamicScriptExcuteWithFormSchema","setSubSchema","previousValue","useRef","_schema","it","MultiSelect","omittedValues","Tooltip","label","CodeEditor","onChange","language","width","viewModel","useReactive","handleEditorMount","editor","monaco","openDrawer","closeDrawer","isConfirm","Modal","MonacoEditor","code","FullscreenOutlined","Drawer","Space","Button","ExcludeEditorSchemaPropsByComponent","Component","Input","InputNumber","Switch","FormItemGenerate","IPaasSchemaForm","forwardRef","ref","update","useUpdate","useImperativeHandle","c"],"mappings":"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","file":"index.js","sourcesContent":["import { createContext, useContext } from \"react\";\n\nexport function createCustomModel<\n  F extends (props: any) => any,\n  T = ReturnType<F>,\n  P = Parameters<F>[0],\n  ProviderProps = P extends undefined\n    ? { children: React.ReactNode }\n    : { children: React.ReactNode; value: P },\n>(useHook: F) {\n  const Context = createContext<T | undefined>(undefined);\n\n  // @ts-expect-error error\n  function Provider({ children, value }: ProviderProps) {\n    const state = useHook(value ?? {});\n    return <Context.Provider value={state}>{children}</Context.Provider>;\n  }\n\n  function useModel(): T {\n    const context = useContext(Context);\n    if (context === undefined) {\n      throw new Error(\"useModel must be used within a Provider\");\n    }\n    return context;\n  }\n\n  return { Provider, useModel };\n}\n","import { useEffect } from \"react\";\n\n// 判断是否是 真值\nfunction isHasValue(value: any) {\n  if (value === undefined || value === null || value === \"\") return false;\n  return true;\n}\n\nexport default function useDefaultValue(props: IPaasCommonFormFieldProps) {\n  useEffect(() => {\n    // 有数据不走默认值\n    if (isHasValue(props.value)) return;\n    // @ts-expect-error 类型推导错误\n    const _defaultValue = props.defaultValue;\n    if (isHasValue(_defaultValue)) {\n      props.onChange(_defaultValue);\n    }\n  }, []);\n}\n","export default function Upload(props: IPaasCommonFormFieldProps<string>) {\n  return 'Upload';\n}\n","import { IPaasSchemaFormStore } from \"../store\";\n\nexport default function useEditor(\n  type: string,\n  defaultComponent?: (...props: any[]) => React.ReactNode\n) {\n  const { editorMap } = IPaasSchemaFormStore.useModel();\n\n  //@ts-expect-error 类型推导错误\n  return editorMap[type] || defaultComponent || editorMap[\"Input\"];\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Form, Select, SelectProps } from \"antd\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { IPaasSchemaFormStore } from \"../../store\";\nimport { useBoolean, useDebounceFn } from \"ahooks\";\nimport useEditor from \"../../hooks/useEditor\";\nimport { FormContext } from \"antd/es/form/context\";\n\nexport default function CustomSelect(\n  props: IPaasCommonFormFieldProps &\n    EditotKindConfigMapping[\"Select\"] &\n    SelectProps\n) {\n  const {\n    depItems = [],\n    name,\n    isDynamic,\n    dynamicScript,\n    schemaInfo,\n    defaultValue,\n    options,\n    ...rest\n  } = props;\n  const { form } = useContext(FormContext);\n  const { dynamicScriptExcuteWithOptions } = IPaasSchemaFormStore.useModel();\n  const [selectOptions, setSelectOptions] = useState<SelectProps[\"options\"]>(\n    options || []\n  );\n  const [loading, loadingAction] = useBoolean(false);\n  const SelectComp = useEditor(\"InnerSelect\", Select);\n\n  const { run, cancel } = useDebounceFn(\n    (extParams: Record<string, any> = { [name]: \"\" }) => {\n      if (!isDynamic) return;\n      if (!dynamicScriptExcuteWithOptions) {\n        return console.error(\"dynamicScriptExcuteWithOptions is not defined\");\n      }\n      loadingAction.setTrue();\n      // 清空当前\n      dynamicScriptExcuteWithOptions({\n        script: dynamicScript,\n        extParams,\n      })\n        .then((list) => {\n          if (!Array.isArray(list)) {\n            return console.error(\n              \"dynamicScriptExcuteWithOptions return value is not an array\"\n            );\n          }\n          // 如果数据不存在当前值，则清空当前值\n          if (!list.some((item) => item.value === props.value)) {\n            // FIXME 这里有一个问题，多层嵌套问题\n            // form!.setFieldValue(props.name, undefined);\n            if (form!.getFieldValue(props.name)) {\n              // @ts-expect-error 先这样吧\n              props.onChange(undefined);\n            }\n          }\n          setSelectOptions(list);\n        })\n        .finally(() => {\n          loadingAction.setFalse();\n        });\n    },\n    {\n      wait: 100,\n    }\n  );\n\n  useEffect(() => {\n    run();\n  }, []);\n\n  return (\n    <Form.Item\n      shouldUpdate={(prevValues: any, currentValues: any) => {\n        if (!isDynamic) return false;\n        if (!depItems) {\n          return false;\n        }\n        const isUpdate = depItems.some((depItem) => {\n          return prevValues[depItem] !== currentValues[depItem];\n        });\n        if (isUpdate) {\n          cancel();\n          run();\n        }\n        return isUpdate;\n      }}\n      noStyle\n    >\n      {() => {\n        return (\n          <SelectComp\n            options={selectOptions}\n            loading={loading}\n            filterOption={false}\n            allowClear\n            onClear={() => {\n              run();\n            }}\n            onSearch={(k: string) => {\n              run({\n                [name]: k,\n              });\n            }}\n            name={name}\n            {...rest}\n            showSearch\n          />\n        );\n      }}\n    </Form.Item>\n  );\n}\n","export function excuteScriptByValidateRules(script: string, value: any): [boolean, string?] {\n  return new Function(\n    'value',\n    `\n    try {\n      ${script}\n      main(value)\n      return [true]\n    } catch (e) {\n      return [false, e.message]\n    }\n  `,\n  )(value);\n}\n","export function replaceHtmlATagsWithMarkdown(str: string) {\n  str = str.replace(/'/g, `\"`);\n  // 正则表达式匹配<a>标签\n  // 匹配具有href属性的<a>标签，可选地匹配具有title属性\n  const regex =\n    /<a\\s+(?:[^>]*?\\s+)?href=\"([^\"]*)\"(\\s+title=\"([^\"]*)\")?([^>]*)?>(.*?)<\\/a>/gi;\n\n  // 使用正则表达式和替换函数进行替换\n  // @ts-expect-error declard but never used\n  return str.replace(regex, (match, href, title, titleText, rest, linkText) => {\n    // 如果有title属性，使用title文本作为链接文本\n    const linkTextToUse = titleText || linkText.trim();\n    return `[${linkTextToUse}](${href})`;\n  });\n}\n","import { Form } from \"antd\";\nimport { ReactNode, useMemo } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport useEditor from \"../hooks/useEditor\";\nimport { excuteScriptByValidateRules } from \"../utils/excuteScript\";\nimport { IPaasSchemaFormStore } from \"../store\";\nimport { replaceHtmlATagsWithMarkdown } from \"./utils\";\n\nimport \"github-markdown-css\";\nimport \"./index.css\";\n\nconst customLinkRenderer = ({ href, children }: any) => {\n  return (\n    <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n      {children}\n    </a>\n  );\n};\n\nconst DefaultConfig = {\n  placeholder: \"请输入\",\n};\n\nfunction CommonLayout(node1: ReactNode, node2: ReactNode) {\n  return (\n    <>\n      {node2}\n      {node1}\n    </>\n  );\n}\n\nfunction WrapperFieldComponent(props: {\n  formItemState: IPaasDynamicFormItem;\n  [x: string]: any;\n}) {\n  const { formItemState, ...otherProps } = props;\n  const { type, payload } = formItemState;\n  const FieldComponent = useEditor(type);\n  const _config = Object.assign({}, DefaultConfig, payload.editor.config);\n  const { editorLayoutWithDesc } = IPaasSchemaFormStore.useModel();\n\n  const _editorLayoutWithDesc = editorLayoutWithDesc || CommonLayout;\n  return (\n    <div className=\"relative\">\n      {_editorLayoutWithDesc(\n        <div className=\"\">\n          <FieldComponent\n            name={payload.code}\n            schemaInfo={payload}\n            {...otherProps}\n            {..._config}\n          />\n        </div>,\n        payload.description && (\n          <div className=\"desc text-[#888f9d] mb-2 text-xs\">\n            <ReactMarkdown\n              components={{\n                a: customLinkRenderer,\n              }}\n              className=\"markdown-body \"\n            >\n              {replaceHtmlATagsWithMarkdown(payload.description)}\n            </ReactMarkdown>\n          </div>\n        )\n      )}\n    </div>\n  );\n}\n\nexport default function RecursionFormItem({\n  formItemState,\n}: {\n  formItemState: IPaasDynamicFormItem;\n}) {\n  const { payload, next } = formItemState;\n\n  const nextFieldItem = useMemo(() => {\n    let current: IPaasDynamicFormItem | null = formItemState;\n    if (!next || !current) return null;\n\n    // 获取所有祖先节点\n    const acients: IPaasDynamicFormItem[] = [];\n    acients.unshift(current);\n    while ((current = current.parent)) {\n      acients.unshift(current);\n    }\n\n    // 递归渲染\n    const item = next(formItemState, acients);\n    if (!item) return null;\n    return <RecursionFormItem formItemState={item} />;\n  }, [formItemState]);\n\n  return (\n    <>\n      <Form.Item\n        key={payload.code.toString()}\n        label={payload.name}\n        name={payload.code}\n        required={payload.required}\n        rules={[\n          {\n            validator(_, value) {\n              return new Promise<void>((r, j) => {\n                let errorMessages = \"\";\n                // 必填校验\n                if (payload.required) {\n                  if (value === undefined || value === null || value === \"\") {\n                    errorMessages = \"请输入\";\n                  }\n                }\n                if (payload.validateRules) {\n                  const [suc, errorMsg = \"校验错误\"] =\n                    excuteScriptByValidateRules(payload.validateRules, value);\n                  if (!suc) {\n                    errorMessages = errorMsg;\n                  }\n                }\n                if (errorMessages) {\n                  j(new Error(errorMessages));\n                } else {\n                  r();\n                }\n              });\n            },\n          },\n        ]}\n      >\n        <WrapperFieldComponent formItemState={formItemState} />\n      </Form.Item>\n      {nextFieldItem}\n    </>\n  );\n}\n","export function createFormItem(itemConfig: IPaasDynamicFormItem) {\n  const { type, payload, next, parent } = itemConfig;\n\n  const nextFunc: IPaasDynamicFormItem[\"next\"] = (current, acient) => {\n    const nextItem = next(current, acient);\n    if (!nextItem) return null;\n\n    nextItem.parent = current;\n    return nextItem;\n  };\n\n  return {\n    type,\n    payload,\n    next: nextFunc,\n    parent,\n  };\n}\n","import { createFormItem } from \"../RecursionFormItem/createFormItem\";\n\nfunction isVisibleFunc(expression: string, formValue: object) {\n  return new Function(\n    \"context\",\n    `\n    try {\n      with(context) {\n        return !!(${expression});\n      }\n    } catch (e) {\n      return false\n    }\n  `\n  )(formValue);\n}\n\nexport function findCusrorItem(\n  schema: IpaasFormSchema[],\n  formValue: object,\n  index: number\n): IPaasDynamicFormItem | null {\n  if (!schema || index >= schema.length) return null;\n\n  const item = schema[index];\n  // 有校验规则并且不通过 就接着往下找\n  if (item.visibleRules && !isVisibleFunc(item.visibleRules, formValue)) {\n    return findCusrorItem(schema, formValue, index + 1);\n  } else {\n    return createFormItem({\n      type: item.editor.kind,\n      payload: item,\n      next: () => {\n        return findCusrorItem(schema, formValue, index + 1);\n      },\n      parent: null,\n    });\n  }\n}\n","import RecursionFormItem from \".\";\nimport { useContext, useMemo } from \"react\";\nimport classNames from \"classnames\";\nimport { useBoolean } from \"ahooks\";\nimport { DownOutlined } from \"@ant-design/icons\";\nimport { findCusrorItem } from \"../utils/findCursorItem\";\nimport { FormContext } from \"antd/es/form/context\";\n\nfunction GroupItem({\n  subSchema,\n  groupName,\n}: {\n  subSchema: IpaasFormSchema[];\n  groupName: string;\n}) {\n  const { form } = useContext(FormContext);\n  const value = form?.getFieldsValue();\n  const [open, openAction] = useBoolean(true);\n  const cursorFormItem = findCusrorItem(subSchema, value, 0);\n\n  return (\n    <div className=\"flex flex-col\">\n      {groupName && (\n        <div\n          onClick={openAction.toggle}\n          className={classNames(\n            \"text-[14px] font-semibold flex justify-between cursor-pointer\",\n            open && \"mb-3\"\n          )}\n        >\n          {groupName}\n\n          <DownOutlined\n            className={classNames(\" transition-all duration-300\", {\n              \"transform rotate-180\": open,\n            })}\n          />\n        </div>\n      )}\n      <div\n        className={classNames(\"overflow-hidden \", {\n          \"max-h-0\": !open,\n        })}\n      >\n        {cursorFormItem && <RecursionFormItem formItemState={cursorFormItem} />}\n      </div>\n    </div>\n  );\n}\n\nexport default function CreateSchemaFormItem({\n  schema,\n}: {\n  schema: IpaasFormSchema[];\n}) {\n  const listByGroup = useMemo(() => {\n    const groupMap = new Map<string, IpaasFormSchema[]>();\n    const list: Array<{\n      groupName: string;\n      subSchema: IpaasFormSchema[];\n    }> = [];\n    schema.forEach((action) => {\n      const group = action.group || \"\";\n      if (!groupMap.has(group)) {\n        const v: IpaasFormSchema[] = [];\n        groupMap.set(group, v);\n        list.push({\n          groupName: group,\n          subSchema: v,\n        });\n      }\n      groupMap.get(group)?.push(action);\n    });\n    return list;\n  }, [schema]);\n\n  return listByGroup.map((group) => {\n    const { groupName, subSchema } = group;\n    return (\n      <GroupItem key={groupName} subSchema={subSchema} groupName={groupName} />\n    );\n  });\n}\n","export function getValueFromObjectByPath(\n  obj: Record<string, any>,\n  path: string[]\n) {\n  // for\n  let result: any = obj;\n  for (let i = 0; i < path.length; i++) {\n    const key = path[i];\n    if (!result[key]) {\n      result = undefined;\n      break;\n    }\n    result = result[key];\n  }\n  return result;\n}\n\nexport function setValueToObjectByPath(\n  obj: Record<string, any>,\n  path: string[],\n  value: any\n) {\n  const lastKey = path.pop();\n  const target = path.reduce((acc, cur) => {\n    if (!acc[cur]) {\n      acc[cur] = {};\n    }\n    return acc[cur];\n  }, obj);\n  target[lastKey!] = value;\n}\n\nexport function getValueFormObjectByExpression(\n  obj: Record<string, any>,\n  expression: string\n) {\n  const path = expression.split(\".\");\n  return getValueFromObjectByPath(obj, path);\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport { IPaasSchemaFormStore } from \"../../store\";\nimport { useBoolean, useDebounceFn } from \"ahooks\";\nimport CreateSchemaFormItem from \"../../RecursionFormItem/CreateSchemaFormItem\";\nimport { FormContext } from \"antd/es/form/context\";\nimport { getValueFormObjectByExpression } from \"../../utils\";\n\nexport default function DaynamicForm(\n  props: IPaasCommonFormFieldProps<Record<string, any>> &\n    EditotKindConfigMapping[\"DynamicForm\"]\n) {\n  const { depItems, dynamicScript, name, isDynamic, staticSubFields } = props;\n  const { dynamicScriptExcuteWithFormSchema } = IPaasSchemaFormStore.useModel();\n  const [_, loadingAction] = useBoolean(false);\n  const [subSchema, setSubSchema] = useState<IpaasFormSchema[]>(\n    staticSubFields || []\n  );\n  const { form } = useContext(FormContext);\n  const formValue = form!.getFieldsValue();\n  const previousValue = useRef<any>();\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    staticSubFields && setSubSchema(staticSubFields);\n  }, [staticSubFields]);\n\n  const { run } = useDebounceFn(\n    () => {\n      if (!isDynamic) return;\n      if (!dynamicScriptExcuteWithFormSchema) {\n        return console.error(\n          \"dynamicScriptExcuteWithFormSchema is not defined\"\n        );\n      }\n      loadingAction.setTrue();\n      // 清空当前\n      dynamicScriptExcuteWithFormSchema({\n        script: dynamicScript || \"\",\n      })\n        .then((list) => {\n          if (!Array.isArray(list)) {\n            return console.error(\n              \"dynamicScriptExcuteWithFormSchema return value is not an array\"\n            );\n          }\n          const _schema = list.map((it) => {\n            // 添加默认值\n            if (!it.editor) {\n              it.editor = {\n                kind: \"Input\",\n                config: {},\n              };\n            }\n            return {\n              ...it,\n              // code: Array.prototype.concat.call([], name, it.code),\n            };\n          });\n          setSubSchema(_schema);\n        })\n        .finally(() => {\n          loadingAction.setFalse();\n        });\n    },\n    {\n      wait: 100,\n      trailing: true,\n    }\n  );\n\n  useEffect(() => {\n    if (!previousValue.current) {\n      run();\n    } else {\n      if (!depItems) {\n        return;\n      }\n      const prevValues = previousValue.current;\n      const isUpdate = depItems.some((depItem) => {\n        return (\n          getValueFormObjectByExpression(prevValues, depItem) !==\n          getValueFormObjectByExpression(formValue, depItem)\n        );\n      });\n      if (isUpdate) {\n        run();\n      }\n    }\n    previousValue.current = formValue;\n  });\n\n  return (\n    <div className=\"p-3 bg-white\">\n      {subSchema.length ? (\n        <CreateSchemaFormItem schema={subSchema} />\n      ) : (\n        <div>暂无配置</div>\n      )}\n    </div>\n  );\n}\n","import { SelectProps, Tooltip } from \"antd\";\nimport CustomSelect from \"../CustomSelect\";\n\nexport default function MultiSelect(\n  props: Omit<SelectProps, \"mode\"> &\n    IPaasCommonFormFieldProps &\n    EditotKindConfigMapping[\"Select\"]\n) {\n  return (\n    <CustomSelect\n      mode=\"multiple\"\n      maxTagPlaceholder={(omittedValues) => (\n        <Tooltip\n          overlayStyle={{ pointerEvents: \"none\" }}\n          title={omittedValues.map(({ label }) => label).join(\", \")}\n        >\n          <span>+{omittedValues.length}...</span>\n        </Tooltip>\n      )}\n      maxTagCount=\"responsive\"\n      {...props}\n    ></CustomSelect>\n  );\n}\n","import MonacoEditor, { OnMount } from \"@monaco-editor/react\";\nimport { FullscreenOutlined } from \"@ant-design/icons\";\nimport { Button, Drawer, Modal, Space } from \"antd\";\nimport { useReactive } from \"ahooks\";\n\n// 在你的构建脚本或配置中\n// const productionPath = process.env.NODE_ENV === 'production' ? '/static/xybot-front-micro-ipaas/dev/41' : '';\n// loader.config({\n//   paths: {\n//     // FIXME: 运行时 注入问题，这里先用 41版本的 cdn吧\n//     vs: productionPath + '/npm/monaco-editor/min/vs',\n//   },\n// });\n\nexport type CodeEditorProps = IPaasCommonFormFieldProps & {\n  language?: string;\n  width?: number;\n};\n\nexport default function CodeEditor(props: CodeEditorProps) {\n  const { value, onChange, language = \"javascript\", width = 700 } = props;\n  const viewModel = useReactive({\n    open: false,\n    draftCode: \"\",\n  });\n\n  const handleEditorMount: OnMount = (editor, monaco) => {\n    // editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyJ, () => {\n    //   editor.getAction('editor.action.formatDocument')?.run();\n    // });\n    // editor.createDecorationsCollection\n    // monaco.languages.typescript.javascriptDefaults.addExtraLib(`\n    //   declare function main2(config: {\n    //     context: {\n    //       params: Record<string, any>;\n    //       a: number\n    //     }\n    //   }): any\n    // `);\n    console.log(editor, monaco);\n  };\n\n  const openDrawer = () => {\n    viewModel.open = true;\n    viewModel.draftCode = value;\n  };\n\n  const closeDrawer = (isConfirm: boolean) => {\n    if (isConfirm || viewModel.draftCode === value) {\n      onChange(viewModel.draftCode);\n      viewModel.open = false;\n    } else {\n      Modal.confirm({\n        title: \"提示\",\n        content: \"是否放弃修改？\",\n        onOk() {\n          viewModel.open = false;\n        },\n      })\n    }\n  };\n\n  return (\n    <div\n      className=\" relative group\"\n      style={{\n        width: width || \"100%\",\n      }}\n    >\n      <MonacoEditor\n        value={value}\n        onChange={(code) => {\n          onChange(code || \"\");\n        }}\n        height={400}\n        language={language}\n        theme=\"vs-dark\"\n        className=\"pt-4 bg-[#1e1e1e]\"\n        options={{\n          fontSize: 12,\n          scrollBeyondLastLine: false,\n          minimap: { enabled: false },\n          tabSize: 2,\n          lineNumbersMinChars: 3,\n        }}\n        onMount={handleEditorMount}\n      />\n      <div\n        onClick={openDrawer}\n        className=\" transition-all opacity-0 group-hover:opacity-100 absolute cursor-pointer bottom-1 right-1 flex items-center justify-center w-[25px] h-[25px] bg-white rounded-sm\"\n      >\n        <FullscreenOutlined />\n      </div>\n      <Drawer\n        title=\"代码编辑器\"\n        open={viewModel.open}\n        width={\"calc(100% - 400px)\"}\n        maskClosable={false}\n        closable={false}\n        zIndex={3000}\n        extra={\n          <Space>\n            <Button\n              onClick={() => {\n                closeDrawer(false);\n              }}\n            >\n              取消\n            </Button>\n            <Button\n              onClick={() => {\n                closeDrawer(true);\n              }}\n              type=\"primary\"\n            >\n              确认\n            </Button>\n          </Space>\n        }\n      >\n        <MonacoEditor\n          value={viewModel.draftCode}\n          onChange={(code) => {\n            viewModel.draftCode = code || \"\";\n          }}\n          height={\"100%\"}\n          language={language}\n          theme=\"vs-dark\"\n          className=\"pt-4 bg-[#1e1e1e]\"\n          options={{\n            fontSize: 12,\n            scrollBeyondLastLine: false,\n            tabSize: 2,\n            lineNumbersMinChars: 3,\n          }}\n          onMount={handleEditorMount}\n        />\n      </Drawer>\n    </div>\n  );\n}\n","import { useMemo } from \"react\";\nimport { createCustomModel } from \"./common/createModel\";\nimport { Input, InputNumber, Switch } from \"antd\";\nimport useDefaultValue from \"./hooks/useDefaultValue\";\nimport Upload from \"./components/Upload\";\nimport CustomSelect from \"./components/CustomSelect\";\nimport DynamicForm from \"./components/DynamicForm\";\nimport MultiSelect from \"./components/MultiSelect\";\nimport CodeEditor from \"./components/CodeEditor\";\n\nexport interface IPaasSchemaFormStoreInfer {\n  editorMap?: Record<string, (props: any) => React.ReactNode>;\n  editorLayoutWithDesc?: (\n    editor: React.ReactNode,\n    desc: React.ReactNode\n  ) => React.ReactNode;\n  dynamicScriptExcuteWithOptions?: (config: {\n    script: string;\n    extParams: Record<string, any>;\n  }) => Promise<{ value: any; label: any }[]>;\n  dynamicScriptExcuteWithFormSchema?: (config: {\n    script: string;\n  }) => Promise<IpaasFormSchema[]>;\n}\n\nfunction ExcludeEditorSchemaPropsByComponent(\n  Component: (props: any) => React.ReactNode\n) {\n  return function (props: any) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { schemaInfo, ...otherProps } = props;\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- 更新defaultValue\n    useDefaultValue(props);\n    return <Component {...otherProps} />;\n  };\n}\n\nexport const IPaasSchemaFormStore = createCustomModel(\n  (props: IPaasSchemaFormStoreInfer) => {\n    return useMemo(() => {\n      const editorMap: Record<\n        ExtractEditorKinds,\n        (props: any) => React.ReactNode\n      > = {\n        Input: ExcludeEditorSchemaPropsByComponent(Input),\n        InputNumber: ExcludeEditorSchemaPropsByComponent(InputNumber),\n        Textarea: ExcludeEditorSchemaPropsByComponent(Input.TextArea),\n        Upload,\n        PlainText: () => <div>PlainText</div>,\n        InputWithCopy: () => <div>InputWithCopy</div>,\n        Select: CustomSelect,\n        Switch: ExcludeEditorSchemaPropsByComponent(Switch),\n        DateTimePicker: () => <div>DateTimePicker</div>,\n        DatePicker: () => <div>DatePicker</div>,\n        TimePicker: () => <div>TimePicker</div>,\n        MultiSelect,\n        MultiList: () => <div>MultiList</div>,\n        DynamicForm,\n        CodeEditor,\n        ...props.editorMap,\n      };\n      return {\n        ...props,\n        editorMap,\n      };\n    }, [props.editorMap]);\n  }\n);\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Form, FormInstance, FormProps } from \"antd\";\nimport { forwardRef, useImperativeHandle } from \"react\";\n\nimport { IPaasSchemaFormStore, type IPaasSchemaFormStoreInfer } from \"./store\";\nimport CreateSchemaFormItem from \"./RecursionFormItem/CreateSchemaFormItem\";\nimport { useUpdate } from \"ahooks\";\n\nimport './index.css'\n\nfunction FormItemGenerate({ schema }: { schema: IpaasFormSchema[] }) {\n  return <CreateSchemaFormItem schema={schema} />;\n}\n\ntype IPaasSchemaFormProps = {\n  schema: IpaasFormSchema[];\n} & IPaasSchemaFormStoreInfer &\n  FormProps;\n\nexport const IPaasSchemaForm = forwardRef<FormInstance, IPaasSchemaFormProps>(\n  (props, ref) => {\n    const [form] = Form.useForm();\n\n    const {\n      schema,\n      editorMap,\n      dynamicScriptExcuteWithOptions,\n      dynamicScriptExcuteWithFormSchema,\n      ...otherProps\n    } = props;\n    const update = useUpdate();\n\n    useImperativeHandle(ref, () => form, [form]);\n\n    return (\n      <IPaasSchemaFormStore.Provider value={props}>\n        <Form\n          form={form}\n          layout=\"vertical\"\n          autoComplete=\"off\"\n          {...otherProps}\n          onValuesChange={(c, v) => {\n            props.onValuesChange?.(c, v);\n            // 子表单change 不会导致父组件更新\n            update();\n          }}\n        >\n          <FormItemGenerate schema={schema} />\n        </Form>\n      </IPaasSchemaFormStore.Provider>\n    );\n  }\n);\n"]}